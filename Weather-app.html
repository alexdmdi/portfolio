<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Weather App">
    <title>Weather App</title>
    
    <!--Bootstrap CDN links for CSS and JS-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

    <script defer src="https://kit.fontawesome.com/af70293d5a.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="styles.css">
    <!-- <link rel="stylesheet" href="bootstrap-breakpoints.css"> -->
    
</head>

<style>
  body {
    background-color:rgb(28, 44, 53) !important;
  }
</style>

<body class="text-white">  
  
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-black mb-4">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">alexdiamandi.com</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto me-5">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="index.html">Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link href active"href="Weather-app.html">Weather App</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="API-fun.html">Fun With API</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="to-do-list.html">To-do-list</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="hobbies.html">Hobbies</a>
            </li>
            
          </ul>
        </div>
      </div>
    </nav>
  </header>
 
  <br>

  <main>
    
    <div class="container-md-fluid ps-3 pe-3 weather-body ">
      
      <div class="row text-center mb-0 mt-1 githubLink">
        
          <a href="https://alexdmdi.github.io/weather-app/" class="display-6 text-center mb-5 text-decoration-none text-light gihubLink ">alexdmdi.github.io/weather-app</a>
          

      </div>
      <div class="row pb-5">
        
        <div class="col text-center">
          <a href="https://alexdmdi.github.io/weather-app/">
            <img src="images/weather-app/weather-app img.png" class="weather-img p-0 mb-1 img-fluid" alt="weather app showcase">
          </a>
        </div> 
   
      </div> 

      <div class="row pb-5">
        <div class="col"></div>

        <div class="col-md-10 col-lg-10 col-xl-6 weather-textBody pt-3 pb-3">
          <p class = "fs-3 mb-0 text-info">
            Overview
          </p>
          <br>
          <p class="mb-5 bg-dark p-3">
            This is a react-vite typescript project that fetches weather data from a free API (openweathermap.org). By default the page is set
            to the users location based on their approximate coordinates, which are fetched from ipapi (https://ipapi.co/json). 
            The theme is set based on the set location, and if the sun is still up there.
          </p>

          <p class = "fs-3 mb-2 text-info">
            Experience gained
          </p>
          
          <ul class="mb-5 list-group list-group-flush">
            <li class="list-group-item">-Common React hooks </li>
            <li class="list-group-item">-Passing information throughout the react component hierarchy with props and functions</li>
            <li class="list-group-item">-Conditional rendering and styling</li>
            <li class="list-group-item">-Lazy loading with react suspense to optimize loading time</li>
            <li class="list-group-item">-Typescript: setting up interfaces, defining types, etc </li>
            <li class="list-group-item">-Async/await, fetch, promises</li>
            <li class="list-group-item">-A lot of experience with native javascript Date objects and methods</li>
            <li class="list-group-item">-Common javascript functions such as .map, .filter </li>
            <li class="list-group-item">-Node package manager and certain packages such as 'date-and-time' </li>
            <li class="list-group-item">-Environment Variables and testing/build configurations </li>
            <li class="list-group-item">-Bootstrap and CSS </li>
            <li class="list-group-item">-Parsing through and sorting data from API responses</li>
          </ul>

          <p class = "fs-3 mb-0 text-info">
            Challenges
          </p>
          <br>
          
          <p class="mb-5 bg-dark p-3">
            I had countless challenges throughout this project that forced me to think analytically and research for hours. Here are three major challenges:
            <br><br>
            Early on I had to consider which variation of the weather API to call, and how. This tied in with the search bar functionality. 
            I used a large object list provided by openweathermap containing all the cities in the world, along with their associated country, ID, and coordinates. The file was big at first, so big that it caused lag, and 
            long loading times for the page during development. I cut down the file size in half by removing some white space, and the coordinate data 
            for each location. I further optimized the search bar component by having it load with react suspense. The search bar would still take a few seconds to be ready on initial 
            load, but in the final build it was automatically optimized further to the point where it is now near instant. The search bar displays search results dynamically 
            as the user types. When the user selects a location, the value is set and gets passed to other components. As for the API calls, I found a solution that conditionally 
            builds a URL string to fetch and update both weather and forecast data, either with coordinates (occurs on page load/refresh), or through a unique location ID from the 
            large locations object. At some point I was struggling with useEffect and ensuring that the right components update and re-render at the right time, in parallel, 
            but after some modifications and adding conditional logic, I solved the issue.
            <br><br>
            Another major challenge I had, was dealing with the raw response data, especially for the forecast data. Each response contains an array with 40 weather objects, that are not 
            categorized by day. Each next array item represents forecast data 3 hours into the future after the previous. Each day has about 8 object array items which then need to be 
            sorted into another object that has 5 nested objects in it, one for each of the following 5 days, and whose date values need to update dynamically. The date provided in 
            each of the 40 list items, is either in the form of epoch time (seconds elapsed since epoch 1970 Jan 1 UTC+0), or in the form of a UTC date string, so this complicated things 
            that much more. The response object does not have a constant pattern/format to it, otherwise I could have just always taken the first 8 array items for example, and push them to the object representing tomorrow, within the 
            followingDays object. Anyway, I had to figure out how to convert the given epoch time to whatever the local time is in that location. This requires being considerate of both the 
            users current location (or what their browser date/time reports), their offset from UTC, and then the time zone offset of the selected location, then passing the final value in milliseconds to the outermost date object.
            All of this was needed for both displaying the time for various things on the page, and for the initial process of iterating through the response array list, in order to 
            populate the "followingDays" object on each API query.
            <br><br>
            Figuring out the conditional day/night styling was harder than expected. <br> The solution: Each time a location is selected, a check occurs that sets a useState boolean to true or false depending on the time of day, which is then 
            passed to App.tsx. If the current time is after sunrise but before sunset, the boolean is set to true and the day theme is used, otherwise the night time is used. I couldn't 
            figure out how to conditionally import regular css files, so instead I found a different solution. For both themes, I took the contents of the css files and stored them in large string literals, in their own separate tsx files.
            The constants from those files are both imported into app.tsx, and then only one at a time is applied conditionally in the style tags, within the app.tsx return statement.
            <br><br>

          </p>
          
          <div class="ps-3">
            <p class = "fs-3 mb-2 text-warning">
              Weather Image sources
            </p>
            
            <p class="mb-1">
              Day time background:
              <div>
                Image by Stanislav Kondratiev: <a href="https://www.pexels.com/photo/photo-of-a-blue-sky-with-white-clouds-2908983" class="text-light">Source</a>
              </div>
              <br>
              
              Night time background:
              <div>
                Image from wallpaperlflare.com: <a href="https://www.wallpaperflare.com/sky-stars-night-cloudy-star-space-astronomy-nature-wallpaper-waays" class="text-light">Source</a>
              </div>
              <br>
  
              Favicon (tab icon):
              <div>
                Image from icons8.com: <a href="https://icons8.com/icon/8EUmYhfLPTCF/sun" class="text-light">Source</a>
              </div>
            </p>

          </div>

        </div>

        <div class="col"></div>

      </div>
     
    </div>


  </main>
    
    
  <footer class="mt-5"></footer>
    
</body>

</html>

